# üõ†Ô∏è Data Orchestration Tools

This folder contains automation tools for managing the Kestra data orchestration project.

## üìã Available Tools

### üèóÔ∏è Build & Container Management
- **[`build.ps1`](build.ps1)** - Docker container build and management
- **[`deploy-all.ps1`](deploy-all.ps1)** - Complete deployment orchestration
- **[`deploy-scripts-clean.ps1`](deploy-scripts-clean.ps1)** - Deploy Python scripts to Kestra
- **[`deploy-workflows.ps1`](deploy-workflows.ps1)** - Deploy workflow YAML files to Kestra

### üêç Python Utilities  
- **[`workflow_generator.py`](workflow_generator.py)** - Interactive workflow generator with database integration
- **[`update-requirements.py`](update-requirements.py)** - Automatic Python requirements scanner

## üöÄ How to Execute PowerShell Scripts

### Method 1: Direct Execution (Recommended)
```powershell
# Navigate to the tools directory
cd tools

# Execute with parameters
.\build.ps1 build
.\deploy-all.ps1 deploy-all
.\deploy-workflows.ps1 list
```

### Method 2: From Project Root
```powershell
# Execute from project root directory
.\tools\build.ps1 help
.\tools\deploy-all.ps1 scripts-only
.\tools\deploy-workflows.ps1 deploy-all
```

### Method 3: Using PowerShell ISE or VS Code Terminal
```powershell
# Set execution policy if needed (run as Administrator)
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# Execute the script
& ".\tools\build.ps1" rebuild
```

## üìñ Script Usage Examples

### Build Management
```powershell
# Build Docker image
.\tools\build.ps1 build

# Start containers
.\tools\build.ps1 up

# Stop and rebuild everything
.\tools\build.ps1 rebuild

# View logs
.\tools\build.ps1 logs
```

### Deployment Commands
```powershell
# Deploy everything (scripts + workflows)
.\tools\deploy-all.ps1

# Deploy only scripts
.\tools\deploy-all.ps1 scripts-only

# Deploy only workflows  
.\tools\deploy-all.ps1 workflows-only

# List deployed workflows
.\tools\deploy-workflows.ps1 list
```

### Workflow Generation
```powershell
# Generate new workflow interactively
python tools/workflow_generator.py

# Update Python requirements
python tools/update-requirements.py
```

## ‚öôÔ∏è Configuration Parameters

Most scripts accept these common parameters:

```powershell
# Custom Kestra URL
.\tools\deploy-all.ps1 -KestraUrl "http://your-kestra:8080"

# Custom namespace
.\tools\deploy-workflows.ps1 list -Namespace "your.namespace"

# Combined example
.\tools\deploy-all.ps1 deploy-all -KestraUrl "http://localhost:8080" -Namespace "company.team"
```

## üîß Prerequisites

### For PowerShell Scripts:
- Windows PowerShell 5.1+ or PowerShell Core 7+
- Docker Desktop (for build/deployment scripts)
- Network access to Kestra instance

### For Python Scripts:
- Python 3.8+
- Required packages: `PyYAML` (auto-detected by update-requirements.py)

## üéØ Common Workflows

### 1. First-Time Setup
```powershell
# 1. Build containers
.\tools\build.ps1 build

# 2. Start Kestra
.\tools\build.ps1 up

# 3. Deploy everything
.\tools\deploy-all.ps1
```

### 2. Development Cycle
```powershell
# 1. Generate new workflow
python tools/workflow_generator.py

# 2. Deploy scripts and workflows
.\tools\deploy-all.ps1

# 3. Test in Kestra UI
```

### 3. Production Deployment
```powershell
# Deploy to production Kestra instance
.\tools\deploy-all.ps1 -KestraUrl "https://prod-kestra.company.com" -Namespace "production.team"
```

## üõ°Ô∏è Troubleshooting

### PowerShell Execution Policy Issues
```powershell
# Check current policy
Get-ExecutionPolicy

# Set policy for current user (if needed)
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### Script Not Found Errors
```powershell
# Ensure you're in the correct directory
Get-Location

# Use full path if needed
& "C:\full\path\to\tools\deploy-all.ps1"
```

### Docker Permission Issues
```powershell
# Ensure Docker Desktop is running
docker version

# Check if containers are accessible
docker ps
```

## üìö Additional Resources

- **[VS Code Tasks Quick Guide](../docs/VSCODE_TASKS_GUIDE.md)** - Complete guide to all available VS Code tasks
- [Kestra Documentation](https://kestra.io/docs)
- [PowerShell Documentation](https://docs.microsoft.com/en-us/powershell/)
- [Docker Documentation](https://docs.docker.com/)

---

**Generated by Data Orchestration Tools - Last Updated: 2025-06-16**

