-- Table: dbo.STG_MON_CustMasterSchedule
-- Database: ORDERS
-- Purpose: [Add description of table purpose]
-- Dependencies: [List any dependent tables/views]

CREATE TABLE [dbo].[STG_MON_CustMasterSchedule] (
    [Title] NVARCHAR(MAX) NULL,
    [UpdateDate] NVARCHAR(MAX) NULL,
    [Group] NVARCHAR(MAX) NULL,
    [Subitems] NVARCHAR(MAX) NULL,
    [CUSTOMER] NVARCHAR(200) NULL,
    [AAG ORDER NUMBER] NVARCHAR(200) NULL,
    [AAG SEASON] NVARCHAR(200) NULL,
    [ORDER DATE PO RECEIVED] DATE NULL,
    [CUSTOMER SEASON] NVARCHAR(MAX) NULL,
    [DROP] NVARCHAR(MAX) NULL,
    [PO NUMBER] NVARCHAR(200) NULL,
    [CUSTOMER ALT PO] NVARCHAR(200) NULL,
    [STYLE] NVARCHAR(200) NULL,
    [STYLE DESCRIPTION] NVARCHAR(500) NULL,
    [ALIAS RELATED ITEM] NVARCHAR(200) NULL,
    [COLOR] NVARCHAR(200) NULL,
    [CATEGORY] NVARCHAR(MAX) NULL,
    [PATTERN ID] NVARCHAR(MAX) NULL,
    [UNIT OF MEASURE] NVARCHAR(MAX) NULL,
    [FCST QTY] DECIMAL(18,4) NULL,
    [FCST CONSUMED QTY] DECIMAL(18,4) NULL,
    [ORDER QTY] BIGINT NULL,
    [PACKED QTY] BIGINT NULL,
    [SHIPPED QTY] BIGINT NULL,
    [Net Demand] BIGINT NULL,
    [ORDER TYPE] NVARCHAR(MAX) NULL,
    [DESTINATION] NVARCHAR(MAX) NULL,
    [DESTINATION WAREHOUSE] NVARCHAR(MAX) NULL,
    [CUSTOMER REQ IN DC DATE] DATE NULL,
    [CUSTOMER EX FACTORY DATE] DATE NULL,
    [DELIVERY TERMS] NVARCHAR(MAX) NULL,
    [PLANNED DELIVERY METHOD] NVARCHAR(MAX) NULL,
    [NOTES] NVARCHAR(MAX) NULL,
    [CUSTOMER PRICE] DECIMAL(18,4) NULL,
    [USA ONLY LSTP 75% EX WORKS] DECIMAL(18,4) NULL,
    [EX WORKS (USD)] DECIMAL(18,4) NULL,
    [ADMINISTRATION FEE] DECIMAL(18,4) NULL,
    [DESIGN FEE] DECIMAL(18,4) NULL,
    [FX CHARGE] DECIMAL(18,4) NULL,
    [HANDLING] NVARCHAR(255) NULL,
    [SURCHARGE FEE] DECIMAL(18,4) NULL,
    [DISCOUNT] DECIMAL(18,4) NULL,
    [FINAL FOB (USD)] DECIMAL(18,4) NULL,
    [HS CODE] NVARCHAR(MAX) NULL,
    [US DUTY RATE] DECIMAL(18,4) NULL,
    [US DUTY] DECIMAL(18,4) NULL,
    [FREIGHT] DECIMAL(18,4) NULL,
    [US TARIFF RATE] DECIMAL(18,4) NULL,
    [US TARIFF] DECIMAL(18,4) NULL,
    [DDP US (USD)] DECIMAL(18,4) NULL,
    [SMS PRICE USD] DECIMAL(18,4) NULL,
    [FINAL PRICES Y/N] NVARCHAR(MAX) NULL,
    [NOTES FOR PRICE] NVARCHAR(MAX) NULL,
    [Item ID] BIGINT NULL,
    [matchAlias] NVARCHAR(MAX) NULL,
    [PLANNING BOARD] NVARCHAR(MAX) NULL,
    [REQUESTED XFD STATUS] NVARCHAR(MAX) NULL,
    [EX-FTY (Change Request)] DATE NULL,
    [EX-FTY (Forecast)] DATE NULL,
    [EX-FTY (Partner PO)] DATE NULL,
    [EX-FTY (Revised LS)] DATE NULL,
    [PRODUCTION TYPE] NVARCHAR(MAX) NULL,
    [AQL INSPECTION] NVARCHAR(MAX) NULL,
    [AQL TYPE] NVARCHAR(MAX) NULL,
    [PLANNED CUT DATE] DATE NULL,
    [MO NUMBER] NVARCHAR(MAX) NULL,
    [PRODUCTION STATUS] NVARCHAR(MAX) NULL,
    [FACTORY COUNTRY] NVARCHAR(MAX) NULL,
    [FACTORY] NVARCHAR(MAX) NULL,
    [ALLOCATION STATUS] NVARCHAR(MAX) NULL,
    [PRODUCTION QTY] BIGINT NULL,
    [TRIM ETA DATE] DATE NULL,
    [FABRIC ETA DATE] DATE NULL,
    [TRIM STATUS] NVARCHAR(MAX) NULL,
    [ADD TO PLANNING] NVARCHAR(MAX) NULL,
    [FABRIC STATUS] NVARCHAR(MAX) NULL,
    [PPS STATUS] NVARCHAR(MAX) NULL,
    [PPS CMT DUE] DATE NULL,
    [PPS CMT RCV] DATE NULL,
    [REVENUE (FOB)] DECIMAL(18,4) NULL,
    [ORDER STATUS] NVARCHAR(MAX) NULL,
    [stg_id] BIGINT NOT NULL,
    [stg_batch_id] UNIQUEIDENTIFIER NOT NULL DEFAULT (newid()),
    [stg_customer_batch] NVARCHAR(100) NULL,
    [stg_status] NVARCHAR(50) NULL DEFAULT ('PENDING'),
    [stg_monday_item_id] BIGINT NULL,
    [stg_error_message] NVARCHAR(MAX) NULL,
    [stg_api_payload] NVARCHAR(MAX) NULL,
    [stg_retry_count] INT NULL DEFAULT ((0)),
    [stg_created_date] DATETIME2 NULL DEFAULT (getdate()),
    [stg_processed_date] DATETIME2 NULL,
    [RANGE / COLLECTION] NVARCHAR(200) NULL,
    [source_uuid] UNIQUEIDENTIFIER NULL,
    [update_operation] VARCHAR(50) NULL DEFAULT ('CREATE'),
    [update_fields] NVARCHAR(MAX) NULL,
    [source_table] VARCHAR(100) NULL,
    [source_query] NVARCHAR(MAX) NULL,
    [update_batch_id] VARCHAR(50) NULL,
    [validation_status] VARCHAR(20) NULL DEFAULT ('PENDING'),
    [validation_errors] NVARCHAR(MAX) NULL,
    [board_id] BIGINT NULL,
    CONSTRAINT [PK_STG_MON_CustMasterSchedule] PRIMARY KEY ([stg_id])
);

-- Indexes
CREATE INDEX [IX_STG_MON_CustMasterSchedule_BatchId] ON [dbo].[STG_MON_CustMasterSchedule] ([stg_batch_id]);
CREATE INDEX [IX_STG_MON_CustMasterSchedule_CustomerBatch] ON [dbo].[STG_MON_CustMasterSchedule] ([stg_customer_batch]);
CREATE INDEX [IX_STG_MON_CustMasterSchedule_OrderNumber] ON [dbo].[STG_MON_CustMasterSchedule] ([AAG ORDER NUMBER]);
CREATE INDEX [IX_STG_MON_CustMasterSchedule_source_uuid] ON [dbo].[STG_MON_CustMasterSchedule] ([source_uuid]);
CREATE INDEX [IX_STG_MON_CustMasterSchedule_Status] ON [dbo].[STG_MON_CustMasterSchedule] ([stg_status]);
