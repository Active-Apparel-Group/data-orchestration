id: monday-boards-mes
namespace: company.team
description: "Update Monday.com Boards with MES data"

tasks:
  - id: setup_and_log
    type: io.kestra.plugin.core.log.Log
    message: |
      ğŸš€ Starting Workflow: {{ flow.id }}
      ğŸ“… Timestamp: {{ now() }}
      ğŸ·ï¸  Namespace: {{ flow.namespace }}
      ğŸ“ Description: Update Monday.com Boards with MES data
      ğŸ“ Script Location: scripts/{{flow.id}}/
      ğŸ—„ï¸  Database Connections: 0
      
  - id: execute_main_workflow
    type: io.kestra.plugin.core.flow.WorkingDirectory
    description: "Execute {{flow.id}} main script with environment configuration"
    namespaceFiles:
      enabled: true
      include:
        - scripts/{{flow.id}}/**
    tasks:
      - id: run_main_script
        type: io.kestra.plugin.scripts.python.Commands
        taskRunner:
          type: io.kestra.plugin.scripts.runner.docker.Docker
          pullPolicy: NEVER
        containerImage: my-custom-kestra:latest
        description: "Execute main workflow logic for {{flow.id}}"
        namespaceFiles:
          enabled: true

        commands:
          - echo "ğŸš€ === Update Monday.com Boards with MES data Starting ==="
          - echo "ğŸ“„ Executing main script for {{flow.id}}..."
          - python scripts/{{flow.id}}/stage_mes.py
          - echo "âœ… === Update Monday.com Boards with MES data Completed ==="
          
  - id: completion_log
    type: io.kestra.plugin.core.log.Log
    message: |
      âœ… Workflow completed successfully!
      ğŸ¯ Workflow: {{flow.id}}
      ğŸ“Š Results: Check task outputs above for detailed execution results
      â° Completed at: {{ now() }}
