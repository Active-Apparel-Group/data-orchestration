metadata:
  version: '2.0'
  description: Comprehensive Production-Ready Mapping - Post-DDL Validation Expansion
  project: orders_unified_delta_sync
  status: production_expanded
  expansion_date: '2025-06-22T20:19:14.988699'
  source_ddl_columns: 321
  target_monday_columns: 88
  expansion_recommendations_applied: 297
  handover_reference: dev/order-staging/handover/orders_unified_monday_mapping.yaml
  
# Database Configuration
source_database:
  name: orders
  table: ORDERS_UNIFIED
  config_key: orders  # From utils/config.yaml
  description: Orders database containing ORDERS_UNIFIED table with comprehensive order data

target_system:
  platform: monday.com
  board_id: 9200517329
  board_name: Customer Master Schedule
  api_type: GraphQL
orchestration_workflow:
  description: UUID & Hash-Based Change Detection Workflow
  sequence:
    phase_1:
      name: UUID Management
      description: Ensure all ORDERS_UNIFIED records have UUIDs for tracking
      implementation: uuid_manager.py
      operation: ensure_uuids_exist()
    phase_2:
      name: Change Detection
      description: Hash-based change detection (Methods 1 & 2)
      implementation: change_detector.py
      operation: detect_changes(customer_filter, limit)
    phase_3:
      name: Customer Batching
      description: Group changes by customer for processing
      implementation: customer_batcher.py
      operation: create_customer_batches(changes)
    phase_4:
      name: Staging & Processing
      description: 'Two-table staging: master items and subitems processed in parallel'
      implementation: staging_processor.py
      parallel_streams:
        master_items:
        - stage_customer_batch(customer, batch_data) -> STG_MON_CustMasterSchedule
        - process_master_schedule(batch_id) -> Monday.com Items
        - promote_to_production(batch_id) -> MON_CustMasterSchedule
        subitems:
        - stage_subitems(batch_id) -> STG_MON_CustMasterSchedule_Subitems
        - process_subitems(batch_id) -> Monday.com Subitems
        - promote_to_production(batch_id) -> MON_CustMasterSchedule_Subitems
      cleanup:
      - cleanup_staging(batch_id)
exact_matches:
- source_field: DELIVERY TERMS
  target_field: DELIVERY TERMS
  target_column_id: dropdown_mkr5kk5
  source_type: NVARCHAR(MAX)
  target_type: dropdown
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_DELIVERY TERMS
    target: Sample_DELIVERY TERMS
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: dropdown
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> dropdown
- source_field: matchAlias
  target_field: matchAlias
  target_column_id: text_mkr61hpz
  source_type: NVARCHAR(MAX)
  target_type: text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_matchAlias
    target: Sample_matchAlias
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> text
- source_field: PATTERN ID
  target_field: PATTERN ID
  target_column_id: text_mkr5cz8m
  source_type: NVARCHAR(MAX)
  target_type: text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_PATTERN ID
    target: Sample_PATTERN ID
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> text
- source_field: TRIM STATUS
  target_field: TRIM STATUS
  target_column_id: lookup_mkr52fpd
  source_type: NVARCHAR(MAX)
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_TRIM STATUS
    target: Sample_TRIM STATUS
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: mirror
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> mirror
- source_field: PACKED QTY
  target_field: PACKED QTY
  target_column_id: formula_mkrea5pd
  source_type: BIGINT
  target_type: formula
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_PACKED QTY
    target: Sample_PACKED QTY
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: BIGINT
    monday_type: formula
    compatible: true
    conversion_notes: BIGINT -> formula
- source_field: NOTES
  target_field: NOTES
  target_column_id: long_text_mkr5hass
  source_type: NVARCHAR(MAX)
  target_type: long_text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_NOTES
    target: Sample_NOTES
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: long_text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> long_text
- source_field: DROP
  target_field: DROP
  target_column_id: dropdown_mkr5w5e
  source_type: NVARCHAR(MAX)
  target_type: dropdown
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_DROP
    target: Sample_DROP
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: dropdown
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> dropdown
- source_field: CUSTOMER SEASON
  target_field: CUSTOMER SEASON
  target_column_id: dropdown_mkr5rgs6
  source_type: NVARCHAR(MAX)
  target_type: dropdown
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_CUSTOMER SEASON
    target: Sample_CUSTOMER SEASON
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: dropdown
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> dropdown
- source_field: CUSTOMER NAME
  target_field: CUSTOMER
  target_column_id: dropdown_mkr542p2
  source_type: NVARCHAR(MAX)
  target_type: dropdown
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: BOGGI MILANO
    target: BOGGI MILANO
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: dropdown
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> dropdown
- source_field: HS CODE
  target_field: HS CODE
  target_column_id: dropdown_mkr5k8yn
  source_type: NVARCHAR(MAX)
  target_type: dropdown
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_HS CODE
    target: Sample_HS CODE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: dropdown
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> dropdown
- source_field: EX-FTY (Partner PO)
  target_field: EX-FTY (Partner PO)
  target_column_id: lookup_mkr640ap
  source_type: DATE
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_EX-FTY (Partner PO)
    target: Sample_EX-FTY (Partner PO)
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: DATE
    monday_type: mirror
    compatible: true
    conversion_notes: DATE -> mirror
- source_field: US DUTY RATE
  target_field: US DUTY RATE
  target_column_id: numeric_mkr5r6at
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_US DUTY RATE
    target: Sample_US DUTY RATE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: UNIT OF MEASURE
  target_field: UNIT OF MEASURE
  target_column_id: color_mkr5yf27
  source_type: NVARCHAR(MAX)
  target_type: status
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_UNIT OF MEASURE
    target: Sample_UNIT OF MEASURE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: status
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> status
- source_field: AQL TYPE
  target_field: AQL TYPE
  target_column_id: lookup_mkr5jem9
  source_type: NVARCHAR(MAX)
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_AQL TYPE
    target: Sample_AQL TYPE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: mirror
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> mirror
- source_field: PLANNED DELIVERY METHOD
  target_field: PLANNED DELIVERY METHOD
  target_column_id: text_mkr5wcpw
  source_type: NVARCHAR(MAX)
  target_type: text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_PLANNED DELIVERY METHOD
    target: Sample_PLANNED DELIVERY METHOD
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> text
- source_field: MO NUMBER
  target_field: MO NUMBER
  target_column_id: lookup_mkr5ew17
  source_type: NVARCHAR(MAX)
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_MO NUMBER
    target: Sample_MO NUMBER
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: mirror
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> mirror
- source_field: ORDER STATUS
  target_field: ORDER STATUS
  target_column_id: color_mkr5j5pp
  source_type: NVARCHAR(MAX)
  target_type: status
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_ORDER STATUS
    target: Sample_ORDER STATUS
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: status
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> status
- source_field: Subitems
  target_field: Subitems
  target_column_id: subtasks_mkr5c0kp
  source_type: NVARCHAR(MAX)
  target_type: subtasks
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_Subitems
    target: Sample_Subitems
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: subtasks
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> subtasks
- source_field: EX FACTORY DATE
  target_field: CUSTOMER EX FACTORY DATE
  target_column_id: date_mkr57811
  source_type: DATE
  target_type: date
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: 2022-10-30
    target: 2022-10-30
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: DATE
    monday_type: date
    compatible: true
    conversion_notes: DATE -> date
- source_field: NOTES FOR PRICE
  target_field: NOTES FOR PRICE
  target_column_id: long_text_mkr5znxn
  source_type: NVARCHAR(MAX)
  target_type: long_text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_NOTES FOR PRICE
    target: Sample_NOTES FOR PRICE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: long_text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> long_text
- source_field: SHIPPED QTY
  target_field: SHIPPED QTY
  target_column_id: formula_mkre5ce5
  source_type: BIGINT
  target_type: formula
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_SHIPPED QTY
    target: Sample_SHIPPED QTY
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: BIGINT
    monday_type: formula
    compatible: true
    conversion_notes: BIGINT -> formula
- source_field: DDP US (USD)
  target_field: DDP US (USD)
  target_column_id: numeric_mkr5js0x
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_DDP US (USD)
    target: Sample_DDP US (USD)
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: US DUTY
  target_field: US DUTY
  target_column_id: numeric_mkr5ev2q
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_US DUTY
    target: Sample_US DUTY
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: FINAL PRICES Y/N
  target_field: FINAL PRICES Y/N
  target_column_id: text_mkr5ptvg
  source_type: NVARCHAR(MAX)
  target_type: text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_FINAL PRICES Y/N
    target: Sample_FINAL PRICES Y/N
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> text
- source_field: PRODUCTION QTY
  target_field: PRODUCTION QTY
  target_column_id: lookup_mkr5fkj1
  source_type: BIGINT
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_PRODUCTION QTY
    target: Sample_PRODUCTION QTY
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: BIGINT
    monday_type: mirror
    compatible: true
    conversion_notes: BIGINT -> mirror
- source_field: FABRIC STATUS
  target_field: FABRIC STATUS
  target_column_id: lookup_mkr5k4yj
  source_type: NVARCHAR(MAX)
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_FABRIC STATUS
    target: Sample_FABRIC STATUS
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: mirror
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> mirror
- source_field: DISCOUNT
  target_field: DISCOUNT
  target_column_id: numeric_mkr56xx8
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_DISCOUNT
    target: Sample_DISCOUNT
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: PPS CMT RCV
  target_field: PPS CMT RCV
  target_column_id: date_mkrvpbcr
  source_type: DATE
  target_type: date
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_PPS CMT RCV
    target: Sample_PPS CMT RCV
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: DATE
    monday_type: date
    compatible: true
    conversion_notes: DATE -> date
- source_field: PRODUCTION STATUS
  target_field: PRODUCTION STATUS
  target_column_id: lookup_mkr5aapc
  source_type: NVARCHAR(MAX)
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_PRODUCTION STATUS
    target: Sample_PRODUCTION STATUS
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: mirror
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> mirror
- source_field: PO NUMBER
  target_field: PO NUMBER
  target_column_id: text_mkr5ej2x
  source_type: NVARCHAR(MAX)
  target_type: text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: OA22_00427
    target: OA22_00427
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> text
- source_field: TRIM ETA DATE
  target_field: TRIM ETA DATE
  target_column_id: lookup_mkr53kbm
  source_type: DATE
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_TRIM ETA DATE
    target: Sample_TRIM ETA DATE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: DATE
    monday_type: mirror
    compatible: true
    conversion_notes: DATE -> mirror
- source_field: ORDER TYPE
  target_field: ORDER TYPE
  target_column_id: dropdown_mkr518fc
  source_type: NVARCHAR(MAX)
  target_type: dropdown
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_ORDER TYPE
    target: Sample_ORDER TYPE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: dropdown
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> dropdown
- source_field: FACTORY COUNTRY
  target_field: FACTORY COUNTRY
  target_column_id: lookup_mkr5yabx
  source_type: NVARCHAR(MAX)
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_FACTORY COUNTRY
    target: Sample_FACTORY COUNTRY
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: mirror
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> mirror
- source_field: DESTINATION
  target_field: DESTINATION
  target_column_id: text_mkr5kbc6
  source_type: NVARCHAR(MAX)
  target_type: text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_DESTINATION
    target: Sample_DESTINATION
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> text
- source_field: CUSTOMER STYLE
  target_field: STYLE
  target_column_id: dropdown_mkr5tgaa
  source_type: NVARCHAR(MAX)
  target_type: dropdown
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: BO23P054102
    target: BO23P054102
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: dropdown
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> dropdown
- source_field: STYLE DESCRIPTION
  target_field: STYLE DESCRIPTION
  target_column_id: long_text_mkr5p0cf
  source_type: NVARCHAR(MAX)
  target_type: long_text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_STYLE DESCRIPTION
    target: Sample_STYLE DESCRIPTION
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: long_text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> long_text
- source_field: ORDER DATE PO RECEIVED
  target_field: ORDER DATE PO RECEIVED
  target_column_id: date_mkr5zp5
  source_type: DATE
  target_type: date
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_ORDER DATE PO RECEIVED
    target: Sample_ORDER DATE PO RECEIVED
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: DATE
    monday_type: date
    compatible: true
    conversion_notes: DATE -> date
- source_field: AQL INSPECTION
  target_field: AQL INSPECTION
  target_column_id: lookup_mkr51rn0
  source_type: NVARCHAR(MAX)
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_AQL INSPECTION
    target: Sample_AQL INSPECTION
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: mirror
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> mirror
- source_field: ADD TO PLANNING
  target_field: ADD TO PLANNING
  target_column_id: color_mkrerxrs
  source_type: NVARCHAR(MAX)
  target_type: status
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_ADD TO PLANNING
    target: Sample_ADD TO PLANNING
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: status
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> status
- source_field: PLANNED CUT DATE
  target_field: PLANNED CUT DATE
  target_column_id: lookup_mkr5bnt8
  source_type: DATE
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_PLANNED CUT DATE
    target: Sample_PLANNED CUT DATE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: DATE
    monday_type: mirror
    compatible: true
    conversion_notes: DATE -> mirror
- source_field: ADMINISTRATION FEE
  target_field: ADMINISTRATION FEE
  target_column_id: numeric_mkr5k68
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_ADMINISTRATION FEE
    target: Sample_ADMINISTRATION FEE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: CUSTOMER REQ IN DC DATE
  target_field: CUSTOMER REQ IN DC DATE
  target_column_id: date_mkr554yz
  source_type: DATE
  target_type: date
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_CUSTOMER REQ IN DC DATE
    target: Sample_CUSTOMER REQ IN DC DATE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: DATE
    monday_type: date
    compatible: true
    conversion_notes: DATE -> date
- source_field: FCST QTY
  target_field: FCST QTY
  target_column_id: numeric_mkrb56rj
  source_type: BIGINT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_FCST QTY
    target: Sample_FCST QTY
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: BIGINT
    monday_type: numbers
    compatible: true
    conversion_notes: BIGINT -> numbers
- source_field: PRODUCTION TYPE
  target_field: PRODUCTION TYPE
  target_column_id: lookup_mkr5j8kx
  source_type: NVARCHAR(MAX)
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_PRODUCTION TYPE
    target: Sample_PRODUCTION TYPE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: mirror
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> mirror
- source_field: HANDLING
  target_field: HANDLING
  target_column_id: text_mkr5s3tm
  source_type: FLOAT
  target_type: text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_HANDLING
    target: Sample_HANDLING
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: text
    compatible: true
    conversion_notes: FLOAT -> text
- source_field: SURCHARGE FEE
  target_field: SURCHARGE FEE
  target_column_id: numeric_mkr57cem
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_SURCHARGE FEE
    target: Sample_SURCHARGE FEE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: REVENUE (FOB)
  target_field: REVENUE (FOB)
  target_column_id: formula_mkrd937j
  source_type: FLOAT
  target_type: formula
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_REVENUE (FOB)
    target: Sample_REVENUE (FOB)
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: formula
    compatible: true
    conversion_notes: FLOAT -> formula
- source_field: EX-FTY (Change Request)
  target_field: EX-FTY (Change Request)
  target_column_id: lookup_mkr6113x
  source_type: DATE
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_EX-FTY (Change Request)
    target: Sample_EX-FTY (Change Request)
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: DATE
    monday_type: mirror
    compatible: true
    conversion_notes: DATE -> mirror
- source_field: Item ID
  target_field: Item ID
  target_column_id: pulse_id_mkr5pb5q
  source_type: BIGINT
  target_type: item_id
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_Item ID
    target: Sample_Item ID
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: BIGINT
    monday_type: item_id
    compatible: true
    conversion_notes: BIGINT -> item_id
- source_field: FCST CONSUMED QTY
  target_field: FCST CONSUMED QTY
  target_column_id: numeric_mkrbty8b
  source_type: BIGINT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_FCST CONSUMED QTY
    target: Sample_FCST CONSUMED QTY
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: BIGINT
    monday_type: numbers
    compatible: true
    conversion_notes: BIGINT -> numbers
- source_field: PPS CMT DUE
  target_field: PPS CMT DUE
  target_column_id: date_mkrvx550
  source_type: DATE
  target_type: date
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_PPS CMT DUE
    target: Sample_PPS CMT DUE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: DATE
    monday_type: date
    compatible: true
    conversion_notes: DATE -> date
- source_field: FACTORY
  target_field: FACTORY
  target_column_id: lookup_mkr55sr9
  source_type: NVARCHAR(MAX)
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_FACTORY
    target: Sample_FACTORY
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: mirror
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> mirror
- source_field: FX CHARGE
  target_field: FX CHARGE
  target_column_id: numeric_mkr5gp6a
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_FX CHARGE
    target: Sample_FX CHARGE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: ALLOCATION STATUS
  target_field: ALLOCATION STATUS
  target_column_id: lookup_mkr5hhjy
  source_type: NVARCHAR(MAX)
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_ALLOCATION STATUS
    target: Sample_ALLOCATION STATUS
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: mirror
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> mirror
- source_field: DESIGN FEE
  target_field: DESIGN FEE
  target_column_id: numeric_mkr5h612
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_DESIGN FEE
    target: Sample_DESIGN FEE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: FREIGHT
  target_field: FREIGHT
  target_column_id: text_mkr5kyf4
  source_type: FLOAT
  target_type: text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_FREIGHT
    target: Sample_FREIGHT
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: text
    compatible: true
    conversion_notes: FLOAT -> text
- source_field: USA ONLY LSTP 75% EX WORKS
  target_field: USA ONLY LSTP 75% EX WORKS
  target_column_id: numeric_mkr5yne4
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_USA ONLY LSTP 75% EX WORKS
    target: Sample_USA ONLY LSTP 75% EX WORKS
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: DESTINATION WAREHOUSE
  target_field: DESTINATION WAREHOUSE
  target_column_id: text_mkr5ps35
  source_type: NVARCHAR(MAX)
  target_type: text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_DESTINATION WAREHOUSE
    target: Sample_DESTINATION WAREHOUSE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> text
- source_field: EX WORKS (USD)
  target_field: EX WORKS (USD)
  target_column_id: numeric_mkr5erhv
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_EX WORKS (USD)
    target: Sample_EX WORKS (USD)
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: PPS STATUS
  target_field: PPS STATUS
  target_column_id: color_mkrvzryf
  source_type: NVARCHAR(MAX)
  target_type: status
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_PPS STATUS
    target: Sample_PPS STATUS
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: status
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> status
- source_field: CUSTOMER ALT PO
  target_field: CUSTOMER ALT PO
  target_column_id: text_mkrh94rx
  source_type: NVARCHAR(MAX)
  target_type: text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_CUSTOMER ALT PO
    target: Sample_CUSTOMER ALT PO
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> text
- source_field: US TARIFF
  target_field: US TARIFF
  target_column_id: numeric_mkr51ndy
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_US TARIFF
    target: Sample_US TARIFF
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: FABRIC ETA DATE
  target_field: FABRIC ETA DATE
  target_column_id: lookup_mkr5vk6m
  source_type: DATE
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_FABRIC ETA DATE
    target: Sample_FABRIC ETA DATE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: DATE
    monday_type: mirror
    compatible: true
    conversion_notes: DATE -> mirror
- source_field: Net Demand
  target_field: Net Demand
  target_column_id: formula_mkrb53jx
  source_type: BIGINT
  target_type: formula
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_Net Demand
    target: Sample_Net Demand
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: BIGINT
    monday_type: formula
    compatible: true
    conversion_notes: BIGINT -> formula
- source_field: CUSTOMER PRICE
  target_field: CUSTOMER PRICE
  target_column_id: numeric_mkr5cact
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_CUSTOMER PRICE
    target: Sample_CUSTOMER PRICE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: SMS PRICE USD
  target_field: SMS PRICE USD
  target_column_id: numeric_mkr58nvp
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_SMS PRICE USD
    target: Sample_SMS PRICE USD
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: PLANNING BOARD
  target_field: PLANNING BOARD
  target_column_id: board_relation_mkr5cer8
  source_type: NVARCHAR(MAX)
  target_type: board_relation
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_PLANNING BOARD
    target: Sample_PLANNING BOARD
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: board_relation
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> board_relation
- source_field: US TARIFF RATE
  target_field: US TARIFF RATE
  target_column_id: numeric_mkr55zg1
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_US TARIFF RATE
    target: Sample_US TARIFF RATE
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: REQUESTED XFD STATUS
  target_field: REQUESTED XFD STATUS
  target_column_id: lookup_mkr6eatd
  source_type: NVARCHAR(MAX)
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_REQUESTED XFD STATUS
    target: Sample_REQUESTED XFD STATUS
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: mirror
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> mirror
- source_field: CUSTOMER COLOUR DESCRIPTION
  target_field: COLOR
  target_column_id: dropdown_mkr5677f
  source_type: NVARCHAR(MAX)
  target_type: dropdown
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: NAVY
    target: NAVY
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: dropdown
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> dropdown
- source_field: AAG ORDER NUMBER
  target_field: AAG ORDER NUMBER
  target_column_id: text_mkr5wya6
  source_type: NVARCHAR(MAX)
  target_type: text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_AAG ORDER NUMBER
    target: Sample_AAG ORDER NUMBER
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> text
- source_field: AAG SEASON
  target_field: AAG SEASON
  target_column_id: dropdown_mkr58de6
  source_type: NVARCHAR(MAX)
  target_type: dropdown
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_AAG SEASON
    target: Sample_AAG SEASON
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: dropdown
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> dropdown
- source_field: ORDER QTY
  target_field: ORDER QTY
  target_column_id: formula_mkre54dj
  source_type: BIGINT
  target_type: formula
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_ORDER QTY
    target: Sample_ORDER QTY
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: BIGINT
    monday_type: formula
    compatible: true
    conversion_notes: BIGINT -> formula
- source_field: RANGE / COLLECTION
  target_field: RANGE / COLLECTION
  target_column_id: long_text_mks0vs1p
  source_type: NVARCHAR(MAX)
  target_type: long_text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_RANGE / COLLECTION
    target: Sample_RANGE / COLLECTION
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: long_text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> long_text
- source_field: EX-FTY (Forecast)
  target_field: EX-FTY (Forecast)
  target_column_id: lookup_mkr6bhyv
  source_type: DATE
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_EX-FTY (Forecast)
    target: Sample_EX-FTY (Forecast)
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: DATE
    monday_type: mirror
    compatible: true
    conversion_notes: DATE -> mirror
- source_field: CATEGORY
  target_field: CATEGORY
  target_column_id: dropdown_mkr5s5n3
  source_type: NVARCHAR(MAX)
  target_type: dropdown
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_CATEGORY
    target: Sample_CATEGORY
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: dropdown
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> dropdown
- source_field: FINAL FOB (USD)
  target_field: FINAL FOB (USD)
  target_column_id: numeric_mkr5nhr7
  source_type: FLOAT
  target_type: numbers
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_FINAL FOB (USD)
    target: Sample_FINAL FOB (USD)
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: FLOAT
    monday_type: numbers
    compatible: true
    conversion_notes: FLOAT -> numbers
- source_field: EX-FTY (Revised LS)
  target_field: EX-FTY (Revised LS)
  target_column_id: lookup_mkr5nd5t
  source_type: DATE
  target_type: mirror
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_EX-FTY (Revised LS)
    target: Sample_EX-FTY (Revised LS)
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: DATE
    monday_type: mirror
    compatible: true
    conversion_notes: DATE -> mirror
- source_field: ALIAS RELATED ITEM
  target_field: ALIAS RELATED ITEM
  target_column_id: text_mkrhra2c
  source_type: NVARCHAR(MAX)
  target_type: text
  mapping_source: ddl_validation_expansion
  expansion_priority: HIGH
  sample_data:
    source: Sample_ALIAS RELATED ITEM
    target: Sample_ALIAS RELATED ITEM
  validation_rules:
    required: false
    max_length: null
    data_type_validation: true
  type_compatibility:
    ddl_type: NVARCHAR(MAX)
    monday_type: text
    compatible: true
    conversion_notes: NVARCHAR(MAX) -> text
mapped_fields:
- source_field: CUSTOMER NAME
  target_field: CUSTOMER
  target_column_id: dropdown_mkr542p2
  source_type: NVARCHAR(MAX)
  target_type: dropdown
  transformation: customer_mapping_lookup
  mapping_source: handover_reference
  mapping_logic: '1. Match ORDERS_UNIFIED.CUSTOMER_NAME against customer_mapping.yaml
    master_order_list values

    2. Return corresponding canonical customer name

    3. Handle multiple master_order_list entries per customer (arrays)

    4. Fall back to original value if no mapping found

    '
  validation_rules:
    required: true
    transformation_required: true
    business_logic_validation: true
computed_fields:
- target_field: Title
  source_fields:
  - CUSTOMER STYLE
  - CUSTOMER COLOUR DESCRIPTION
  - AAG ORDER NUMBER
  transformation: concatenation
  formula: CUSTOMER_STYLE + COLOR + AAG_ORDER_NUMBER
  sample_data:
    source:
    - JWHD100120
    - WHITE
    - JOO-00505
    target: JWHD100120WHITEJOO-00505
  notes: Composite identifier for Monday.com items - Monday.com uses 'Title' as the
    item name field
  mapping_source: handover_reference
  performance_notes: Computed at transformation time
business_logic_mappings:
  customer_season_fallback:
    description: CUSTOMER SEASON → AAG SEASON fallback logic
    implementation: Use CUSTOMER SEASON if available, fallback to AAG SEASON
    priority: HIGH
    validation: Both fields should be validated for business consistency
  group_naming_logic:
    description: Monday.com group naming convention
    implementation: Use CUSTOMER SEASON → AAG SEASON fallback for group names
    priority: HIGH
    reference: handover_folder_staging_operations_logic
  title_concatenation:
    description: Item title creation logic
    implementation: CUSTOMER_STYLE + COLOR + AAG_ORDER_NUMBER
    priority: MEDIUM
    validation: Ensure all components are non-null before concatenation
validation_rules:
  required_fields:
  - AAG ORDER NUMBER
  - CUSTOMER
  - AAG SEASON
  field_length_limits:
    AAG ORDER NUMBER: 200
    CUSTOMER: 200
    PO NUMBER: 200
  data_type_validations:
    ORDER DATE PO RECEIVED: date
    CUSTOMER REQ IN DC DATE: date
    CUSTOMER EX FACTORY DATE: date
  business_rule_validations:
    customer_season_aag_season_consistency: Validate season alignment
    quantity_field_non_negative: All quantity fields must be >= 0
    date_field_chronological_order: Delivery dates must be chronologically consistent
performance_settings:
  batch_size: 1000
  rate_limit_delay: 0.1
  retry_attempts: 3
  timeout_seconds: 30
# 🧩 SUBITEM FIELD MAPPINGS (From Working Implementation)
# Reference: scripts/customer_master_schedule_subitems/mon_add_customer_ms_subitems.py
subitem_mappings:
  description: "Size-based subitem creation for garment orders"
  implementation_reference: "scripts/customer_master_schedule_subitems/mon_add_customer_ms_subitems.py"
  workflow: "Size melting/unpivoting process - 276+ size columns to individual subitems"
  
  # Core subitem fields from working Monday.com API calls
  fields:
    size_dropdown:
      source_field: "Size" # From melted/unpivoted size columns
      target_column_id: "dropdown_mkrak7qp"
      target_type: "dropdown"
      description: "Size designation (XS, S, M, L, XL, 2XL, 32DD, etc.)"
      validation: "create_labels_if_missing: true"
      source_detection: "Columns between 'UNIT OF MEASURE' and 'TOTAL QTY'"
      
    order_quantity:
      source_field: "Order_Qty" # From melted size column values
      target_column_id: "numeric_mkra7j8e"
      target_type: "numeric"
      description: "Quantity ordered for this specific size"
      validation: "must_be_positive (> 0)"
      
    # Additional fields from working implementation
    received_quantity:
      source_field: "Received_Qty" # Future use
      target_column_id: "numeric_mkraepx7"
      target_type: "numeric"
      description: "Quantity received (currently set to 0)"
      default_value: 0
      
    shipped_quantity:
      source_field: "Shipped_Qty" # Future use  
      target_column_id: "numeric_mkrapgwv"
      target_type: "numeric"
      description: "Quantity shipped (currently set to 0)"
      default_value: 0

  # Size column detection logic (from working script lines 87-93)
  size_detection:
    method: "column_position_based"
    start_marker: "UNIT OF MEASURE"
    end_marker: "TOTAL QTY"
    implementation: |
      def detect_size_columns(df):
          try:
              start = df.columns.get_loc('UNIT OF MEASURE')
              end = df.columns.get_loc('TOTAL QTY')
              return df.columns[start+1:end]
          except KeyError:
              return []
              
  # Melting/unpivoting process (from working script lines 95-104)
  size_melting:
    method: "pandas_melt"
    id_vars: ["Item ID", "STYLE", "COLOR", "AAG ORDER NUMBER", "CUSTOMER"]
    value_vars: "detected_size_columns"
    var_name: "Size"
    value_name: "Order_Qty"
    filter_condition: "Order_Qty > 0"
    implementation: |
      melted_df = df.melt(
          id_vars=['Item ID', 'STYLE', 'COLOR'],
          value_vars=size_columns,
          var_name='Size',
          value_name='Order_Qty'
      ).query('Order_Qty > 0')

  # Monday.com API integration (from working script lines 140-160)
  api_integration:
    mutation: "create_subitem"
    board_id: "4755559751"
    parent_item_source: "monday_item_id from master record"
    item_name_format: "Size {size_name}"
    column_values_json: |
      {
        "dropdown_mkrak7qp": {"labels": [str(size_name)]},
        "numeric_mkra7j8e": str(order_qty),
        "numeric_mkraepx7": 0,
        "numeric_mkrapgwv": 0
      }
    options:
      create_labels_if_missing: true
      
  # Database tracking (from sql/migrations/002_add_subitem_board_id.sql)
  database_tracking:
    staging_table: "STG_MON_CustMasterSchedule_Subitems"
    production_table: "MON_CustMasterSchedule_Subitems"
    error_table: "ERR_MON_CustMasterSchedule_Subitems"
    tracking_fields:
      stg_monday_subitem_id: "BIGINT - Monday.com subitem ID"
      stg_monday_subitem_board_id: "BIGINT - Monday.com board ID"
      stg_batch_id: "UNIQUEIDENTIFIER - Processing batch reference"
      stg_parent_monday_item_id: "BIGINT - Parent item reference"

# 🔧 INTEGRATION REQUIREMENTS
subitem_integration_requirements:
  dependencies:
    - "Master item must be created first (parent_item_id required)"
    - "Size columns must be detected and melted before subitem creation"
    - "Monday.com API credentials and board access required"
    - "Database tables must exist with proper tracking columns"
    
  error_handling:
    retry_logic: "Exponential backoff for transient API failures"
    error_grouping: "Group errors by type for summary reporting"
    recovery_mechanism: "Resume failed batches from last successful record"
    
  performance_settings:
    rate_limit: "0.1 second delay between API calls"
    batch_size: "Process subitems per master item"
    timeout: "30 seconds per API call"
    monitoring: "Track success rates and API response times"
